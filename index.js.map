{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/error.svg","../src/img/info.svg","../src/main.js"],"sourcesContent":["import axios from 'axios';\nexport const pageLimit = 15;\nconst GET_URL = 'https://pixabay.com/api/';\nconst API_KEY = '49667075-d98922f201863107fc2d4193e';\n\nexport async function getImagesByQuery(search, page = 1) {\n    return await axios.get(`${GET_URL}`, {\n        params: {\n            key: API_KEY,\n            q: search,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            per_page: pageLimit, page,\n        }\n    })\n};","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const gallery = document.querySelector('.gallery');\nexport const loader = document.querySelector('.loader');\n\nexport const loadBtn = {\n  btn: document.querySelector('button[name=\"load-more\"]'),\n  hideBtn() {\n    loadBtn.btn.classList.add(\"visually-hidden\");\n  },\n  showBtn() {\n    loadBtn.btn.classList.remove(\"visually-hidden\");\n  }\n};\n\nexport function createMarkup(hits) {\n  const markUp = hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"gallery_item\">\n        <a class=\"gallery_img_link\" href=\"${largeImageURL}\">\n        <img class=\"gallery_img\"\n          src=\"${webformatURL}\" \n          alt=\"${tags}\" \n          width=\"360\" \n          height=\"200\" /></a>\n        <div class=\"gallery_item_box\">\n          <ul class=\"gallery_item_list\">\n            <li>\n              <p>Likes</p>\n              ${likes}\n            </li>\n            <li>\n              <p>Views</p>\n              ${views}\n            </li>\n            <li>\n              <p>Comments</p>\n              ${comments}\n            </li>\n            <li>\n              <p>Downloads</p>\n              ${downloads}\n            </li>\n          </ul>\n        </div>\n      </li>\n      `\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML(\"beforeend\", markUp);\n  modal.refresh();\n}\n\nconst modal = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 150,\n});\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\nexport function toggleLoader() {\n  loader.classList.toggle('visually-hidden');\n}\n","export default \"data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M6.81%200.219C6.95056%200.0787966%207.14097%204.21785e-05%207.3395%200L16.6605%200C16.859%204.21785e-05%2017.0494%200.0787966%2017.19%200.219L23.781%206.81C23.9212%206.95056%2024%207.14097%2024%207.3395V16.6605C24%2016.859%2023.9212%2017.0494%2023.781%2017.19L17.19%2023.781C17.0494%2023.9212%2016.859%2024%2016.6605%2024H7.3395C7.14097%2024%206.95056%2023.9212%206.81%2023.781L0.219%2017.19C0.0787966%2017.0494%204.21785e-05%2016.859%200%2016.6605L0%207.3395C4.21785e-05%207.14097%200.0787966%206.95056%200.219%206.81L6.81%200.219ZM7.65%201.5L1.5%207.65V16.35L7.65%2022.5H16.35L22.5%2016.35V7.65L16.35%201.5H7.65Z'%20fill='%23FAFAFB'/%3e%3cpath%20d='M6.969%206.969C7.03867%206.89916%207.12143%206.84374%207.21255%206.80593C7.30366%206.76812%207.40135%206.74866%207.5%206.74866C7.59865%206.74866%207.69633%206.76812%207.78745%206.80593C7.87857%206.84374%207.96133%206.89916%208.031%206.969L12%2010.9395L15.969%206.969C16.0387%206.89927%2016.1215%206.84395%2016.2126%206.80622C16.3037%206.76848%2016.4014%206.74905%2016.5%206.74905C16.5986%206.74905%2016.6963%206.76848%2016.7874%206.80622C16.8785%206.84395%2016.9613%206.89927%2017.031%206.969C17.1007%207.03873%2017.156%207.12152%2017.1938%207.21263C17.2315%207.30374%2017.2509%207.40139%2017.2509%207.5C17.2509%207.59862%2017.2315%207.69627%2017.1938%207.78738C17.156%207.87849%2017.1007%207.96127%2017.031%208.031L13.0605%2012L17.031%2015.969C17.1007%2016.0387%2017.156%2016.1215%2017.1938%2016.2126C17.2315%2016.3037%2017.2509%2016.4014%2017.2509%2016.5C17.2509%2016.5986%2017.2315%2016.6963%2017.1938%2016.7874C17.156%2016.8785%2017.1007%2016.9613%2017.031%2017.031C16.9613%2017.1007%2016.8785%2017.156%2016.7874%2017.1938C16.6963%2017.2315%2016.5986%2017.2509%2016.5%2017.2509C16.4014%2017.2509%2016.3037%2017.2315%2016.2126%2017.1938C16.1215%2017.156%2016.0387%2017.1007%2015.969%2017.031L12%2013.0605L8.031%2017.031C7.96127%2017.1007%207.87848%2017.156%207.78737%2017.1938C7.69626%2017.2315%207.59861%2017.2509%207.5%2017.2509C7.40138%2017.2509%207.30373%2017.2315%207.21262%2017.1938C7.12151%2017.156%207.03873%2017.1007%206.969%2017.031C6.89927%2016.9613%206.84395%2016.8785%206.80621%2016.7874C6.76847%2016.6963%206.74905%2016.5986%206.74905%2016.5C6.74905%2016.4014%206.76847%2016.3037%206.80621%2016.2126C6.84395%2016.1215%206.89927%2016.0387%206.969%2015.969L10.9395%2012L6.969%208.031C6.89915%207.96133%206.84374%207.87857%206.80593%207.78745C6.76812%207.69633%206.74866%207.59865%206.74866%207.5C6.74866%207.40135%206.76812%207.30367%206.80593%207.21255C6.84374%207.12143%206.89915%207.03867%206.969%206.969Z'%20fill='%23FAFAFB'/%3e%3c/svg%3e\"","export default \"data:image/svg+xml,%3csvg%20width='22'%20height='24'%20viewBox='0%200%2022%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M11%2024.0001C11.7956%2024.0001%2012.5587%2023.684%2013.1213%2023.1214C13.6839%2022.5588%2014%2021.7957%2014%2021.0001H8C8%2021.7957%208.31607%2022.5588%208.87868%2023.1214C9.44129%2023.684%2010.2044%2024.0001%2011%2024.0001ZM11%202.87709L9.8045%203.11859C8.44844%203.39489%207.2295%204.13125%206.35398%205.20302C5.47846%206.2748%205.00015%207.61617%205%209.00009C5%209.94209%204.799%2012.2956%204.3115%2014.6131C4.0715%2015.7636%203.7475%2016.9621%203.317%2018.0001H18.683C18.2525%2016.9621%2017.93%2015.7651%2017.6885%2014.6131C17.201%2012.2956%2017%209.94209%2017%209.00009C16.9995%207.61643%2016.521%206.27541%2015.6455%205.20394C14.7701%204.13247%2013.5513%203.39634%2012.1955%203.12009L11%202.87709ZM20.33%2018.0001C20.6645%2018.6706%2021.0515%2019.2016%2021.5%2019.5001H0.5C0.9485%2019.2016%201.3355%2018.6706%201.67%2018.0001C3.02%2015.3001%203.5%2010.3201%203.5%209.00009C3.5%205.37009%206.08%202.34009%209.5075%201.64859C9.48656%201.44002%209.50958%201.22938%209.57505%201.03025C9.64052%200.831122%209.74701%200.647926%209.88763%200.492479C10.0283%200.337031%2010.1999%200.212784%2010.3915%200.127749C10.5831%200.0427135%2010.7904%20-0.0012207%2011%20-0.0012207C11.2096%20-0.0012207%2011.4169%200.0427135%2011.6085%200.127749C11.8001%200.212784%2011.9717%200.337031%2012.1124%200.492479C12.253%200.647926%2012.3595%200.831122%2012.4249%201.03025C12.4904%201.22938%2012.5134%201.44002%2012.4925%201.64859C14.1879%201.99344%2015.7121%202.91363%2016.8069%204.25334C17.9016%205.59305%2018.4998%207.26995%2018.5%209.00009C18.5%2010.3201%2018.98%2015.3001%2020.33%2018.0001Z'%20fill='white'/%3e%3c/svg%3e\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getImagesByQuery, pageLimit } from './js/pixabay-api';\nimport {\n  createMarkup,\n  clearGallery,\n  toggleLoader,\n  loadBtn,\n} from './js/render-functions';\nimport iconError from './img/error.svg';\nimport iconInfo from './img/info.svg';\n\nconst form = document.querySelector('.form');\nlet page;\nlet search = '';\n\nform.addEventListener('submit', searchSubmit);\nloadBtn.btn.addEventListener('click', loadMore);\n\niziToast.settings({\n  messageColor: '#fafafb',\n  titleColor: '#fafafb',\n  backgroundColor: '#ef4040',\n  iconUrl: iconError,\n  closeOnEscape: true,\n  closeOnClick: true,\n  position: 'bottomCenter',\n});\n\nasync function searchSubmit(evt) {\n  evt.preventDefault();\n  page = 1;\n  loadBtn.hideBtn();\n\n  const searchInput = evt.target.elements['search-text'];\n search = searchInput.value.trim();\n\n  if (!search) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please, enter a valid image name!',\n    });\n    return;\n  }\n  clearGallery();\n  toggleLoader();\n\n  try {\n    const resp = await getImagesByQuery(search);\n    if (resp.data.total === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching<br>your search query. Please try again!',\n      });\n      return;\n    }\n\n    createMarkup(resp.data.hits);\n    resp.data.totalHits < pageLimit ? loadBtn.hideBtn() : loadBtn.showBtn();\n    page += 1;\n  } catch (error) {\n    iziToast.error({\n      title: 'Oh no!',\n      message: `${error.message}`,\n    });\n  } finally {\n    toggleLoader();\n  }\n  form.reset();\n}\n\nasync function loadMore() {\n  toggleLoader();\n  try {\n    const resp = await getImagesByQuery(search, page);\n    if (resp.data.totalHits < pageLimit * page) {\n      loadBtn.hideBtn();\n      iziToast.info({\n        message: `We're sorry, but you've reached the end of search results.`,\n        backgroundColor: '#09',\n        icon: iconInfo,\n      });\n    }\n\n    createMarkup(resp.data.hits);\n    page += 1;\n    smoothScroll();\n  } catch (error) {\n    iziToast.error({\n      title: 'Oh no!',\n      message: `${error.message}`,\n    });\n  } finally {\n    toggleLoader();\n  }\n}\n\nfunction smoothScroll() {\n  const galleryCard = document\n    .querySelector('.gallery_item')\n    .getBoundingClientRect();\n  window.scrollBy({\n    top: galleryCard.height * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["pageLimit","GET_URL","API_KEY","getImagesByQuery","search","page","axios","gallery","loader","loadBtn","createMarkup","hits","markUp","webformatURL","largeImageURL","tags","likes","views","comments","downloads","modal","SimpleLightbox","clearGallery","toggleLoader","iconError","iconInfo","form","searchSubmit","loadMore","iziToast","evt","resp","error","smoothScroll","galleryCard"],"mappings":"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"}